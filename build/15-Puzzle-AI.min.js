/*! 15-Puzzle-AI 2014-05-16 */
var Board=function(){"use strict";function a(a,b){var d=c[a[0]][a[1]];c[a[0]][a[1]]=c[b[0]][b[1]],c[b[0]][b[1]]=d}var b,c=[],d=[],e=function(a){for(var e=0;e<a.length;e++)c[e]=a[e];b=c.length,d=this.getPositionOf(null)};return e.prototype.getPositions=function(){return c},e.prototype.getFreeSpace=function(){return d},e.prototype.getValidSwaps=function(){for(var a=d[0],c=d[1],e=a+1,f=c+1,g=a-1,h=c-1,i=[[a,f],[a,h],[e,c],[g,c]],j=[],k=0;k<i.length;k++){for(var l=!0,m=0;2>m;m++)(i[k][m]>=b||i[k][m]<0)&&(l=!1);l===!0&&j.push([i[k]])}return j},e.prototype.getPositionOf=function(a){for(var b=0;b<c.length;b++)for(var d=0;d<c.length;d++)if(c[b][d]==a)return[b,d]},e.prototype.printPositions=function(){console.log(c)},e.prototype.swapUp=function(){if(0===d[0])return!1;var b=d[0],c=d[1],e=b+1,f=c;return a([b,c],[e,f]),!0},e.prototype.swapDown=function(){if(d[0]===b)return!1;var c=d[0],e=d[1],f=c-1,g=e;return a([c,e],[f,g]),!0},e.prototype.swapLeft=function(){if(0===d[1])return!1;var b=d[0],c=d[1],e=b,f=c-1;return a([b,c],[e,f]),!0},e.prototype.swapRight=function(){if(d[1]===b)return!1;var c=d[0],e=d[1],f=c,g=e+1;return a([c,e],[f,g]),!0},e.prototype.isSolved=function(){for(var a=0,b=0;b<c.length;b++)for(var d=0;d<c[b].length;d++){if(c[b][d]!=a&&(b!=c.length-1||d!=c[b].length-1))return!1;a++}return!0},e}(),PuzzleAI=function(){"use strict";var a,b={};return b.solve=function(c){return a=c,b.breadthSearch()},b.breadthSearch=function(){var b=[];for(b.push(a);b.length>0;){var c=b.pop(),d=(c.getFreeSpace(),["swapUp","swapDown","swapLeft","swapRight"]);c.printPositions();for(var e=0;e<d.length;e++){var f=d[e],g=new Board(c.getPositions()),h=g[f]();if(h===!0){if(console.log("successfully swapped: "+f),g.printPositions(),g.isSolved())return console.log("solved!"),g;console.log("pushing board"),b.push(g)}else console.log("could not swap: "+f)}}},b}(),positions=[[0,1,2,3],[4,5,6,7],[null,9,10,11],[8,12,13,14]],board=new Board(positions);board.isSolved()||(board=PuzzleAI.solve(board)),console.log(board.getPositionOf(null)),console.log("board is solved? : "+board.isSolved()),board.printPositions();